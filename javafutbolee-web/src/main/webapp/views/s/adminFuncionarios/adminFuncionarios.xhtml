<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://xmlns.jcp.org/jsf/core">
    <ui:composition template="/templates/standAloneTemplate.xhtml">


        <ui:define name="title">
            JavaFutbolEE|Admin Socios
        </ui:define>


        <ui:define name="menuitem">

        </ui:define>

        <ui:define name="content">
            <h:form id="form3">
                <input type="hidden"  name="${_csrf.parameterName}"  value="${_csrf.token}"/>

                <section class="call-to-action full-height" style="background-color: #f5f5f5;">
                    <div class="container">
                        <div class="section-header">
                            <h2 class="text-light wow fadeIn" data-wow-delay="0.25s">Administración <strong>Funcionarios</strong></h2>
                            <div class="colored-line wow fadeInLeftBig"></div>
                            <div class="sub-heading">Administre a todos los funcionarios y sus roles: Administradores de socios, Relacionista Público, etc...</div>					
                        </div>

                        <p:commandButton class="success " value="Añadir" icon="fa fa-user-plus"
                                         ajax="true" actionListener="#{funcionariosBean.resetAddFuncionario}" 
                                         update="dialogs"
                                         oncomplete="PF('dlgAddFuncionario').show();"/>                        
 
                        <br/><br/>


                        <p:dataTable var="func" value="#{funcionariosBean.personalList}" rows="10"
                                     paginator="true"  reflow="true" editable="false"
                                     sortMode="multiple"
                                     selectionMode="single" selection="#{funcionariosBean.selectedPersonal}" rowKey="#{func.psnId}"
                                     paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                     rowsPerPageTemplate="5,10,15"
                                     >
                            <f:facet name="emptyMessage">
                                <h2 class="text-light">Ningún Funcionario</h2>
                            </f:facet>
                            <f:facet name="header">
                                Funcionarios
                            </f:facet>
                            <p:column headerText="Id" sortBy="#{func.psnId}">
                                <h:outputText value="#{func.psnId}" />
                            </p:column>

                            <p:column headerText="CI" sortBy="#{func.usuario.usrCi}">
                                <h:outputText value="#{func.usuario.usrCi}" />
                            </p:column>

                            <p:column headerText="Nombres" sortBy="#{func.psnNombre}">
                                <h:outputText value="#{func.psnNombre}" />
                            </p:column>

                            <p:column headerText="Apellidos" sortBy="#{func.psnApellido}">
                                <h:outputText value="#{func.psnApellido}" />
                            </p:column>

                        </p:dataTable>

                    </div>
                </section>
            </h:form>
        </ui:define>


        <ui:define name="dialogs">
            <h:form>
                <input type="hidden"  name="${_csrf.parameterName}"  value="${_csrf.token}"/>
                <p:dialog header="Añadir Funcionario" widgetVar="dlgAddFuncionario" modal="true" hideEffect="fade"
                          closeOnEscape="true" 
                          onShow="$('#content').addClass('blurx');" onHide="$('#content').removeClass('blurx');">

                    <div class="grid">
                        <div class="row cells2">                            

                            <div class="cell">                                                             
                                <div class="input-control">
                                    <p:outputLabel for="psnNombre" value="Nombres"/>
                                    <p:inputText id="psnNombre" value="#{funcionariosBean.psnNombre}"
                                                 required="true" validatorMessage="Nombres inválidos"/> 
                                </div>
                                <br/>
                                <br/>
                                
                                <div class="input-control">
                                    <p:outputLabel for="psnApellido" value="Apellidos"/>
                                    <p:inputText id="psnApellido" value="#{funcionariosBean.selectedPersonal.psnApellido}"
                                                 required="true" validatorMessage="Apellidos inválidos"/>
                                </div>
                                <br/><br/>
                                
                                <div class="input-control">
                                    <p:outputLabel for="psnFechaNac" value="Nacimiento"/>
                                    <p:calendar id="psnFechaNac" navigator="true" placeholder="Fecha Nacimiento"
                                                validatorMessage="Fecha Nacimiento Inválida" required="true"
                                                mask="true" pattern="dd-MM-yyyy"
                                                value="#{funcionariosBean.selectedPersonal.psnFechaNac}"/>
                                </div>
                                <br/><br/>
                                
                                <div class="input-control">
                                    <p:outputLabel for="psnGenero" value="Género"/>
                                    <p:selectOneMenu id="psnGenero" value="#{funcionariosBean.selectedPersonal.psnGenero}" style="width:125px">
                                        <f:selectItem itemLabel="Masculino" itemValue="0" />
                                        <f:selectItem itemLabel="Femenino" itemValue="1" />
                                    </p:selectOneMenu>
                                </div>
                                <br/><br/>
                            </div>

                            <div class="cell">                                
                                <div class="input-control">
                                    <p:outputLabel for="psnDireccion" value="Dirección"/>
                                    <p:inputText id="psnDireccion" value="#{funcionariosBean.selectedPersonal.psnDireccion}"/>
                                </div>
                                <br/>
                                <br/>
                                
                                <div class="input-control">
                                    <p:outputLabel for="psnTelefono" value="Teléfono"/>
                                    <p:inputMask id="psnTelefono" required="true" mask="" validatorMessage="Teléfono Inválido" 
                                                 value="#{funcionariosBean.selectedPersonal.psnTelefono}"/>
                                </div>
                                <br/><br/>
                                
                                <div class="input-control">
                                    <p:outputLabel for="psnCelular" value="Celular"/>
                                    <p:inputMask id="psnCelular" required="true" validatorMessage="Celular inválido" mask="" 
                                                 value="#{funcionariosBean.selectedPersonal.psnCelular}"/>
                                </div>
                                <br/><br/>
                                
                                <div class="input-control">
                                    <p:outputLabel for="usrCi" value="Cédula"/>
                                    <p:inputText id="usrCi" value="#{funcionariosBean.selectedPersonal.usuario.usrCi}"
                                                 required="true" validatorMessage="Cédula inválidos"/>
                                </div>
                                <br/><br/>

                            </div>

                        </div>
                        
                        <div class="row">
                            <div class="cell">
                                <div class="input-control">
                                    <p:outputLabel for="usrEmail" value="Email"/>
                                    <p:inputText id="usrEmail" value="#{funcionariosBean.selectedPersonal.usuario.usrEmail}"
                                                 required="true" type="email" validatorMessage="Email inválidos">
                                    <p:clientValidator event="keyup"/>
                                    <f:validateRegex pattern="^([\w-]+(?:\.[\w-]+)*)@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)"/>
                                    </p:inputText>
                                </div>
                                <br/><br/>
                            </div>
                        </div>
                        
                        <div class="row">
                            <div class="cell align-right">
                                <p:commandButton class="primary" value="Guardar" icon="fa fa-check" validateClient="true" action="#{funcionariosBean.addFuncionarioAction()}"
                                                 oncomplete="alert('mayra')"  />
                            </div>
                        </div>
                    </div>

                </p:dialog> 
            </h:form>
        </ui:define>
    </ui:composition>
</html>

